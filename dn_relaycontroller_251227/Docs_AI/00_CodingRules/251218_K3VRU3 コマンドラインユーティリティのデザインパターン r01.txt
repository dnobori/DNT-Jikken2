「251218_K3VRU3 コマンドラインユーティリティ」

このファイルの指示は、あるプログラムの実装において、「251218_K3VRU3 コマンドラインユーティリティ」というパターンの使用が指示された場合にのみ適用される。「251218_K3VRU3 コマンドラインユーティリティ」が指定された場合は、次のデザインパターンに従って実装すること。


1. プログラム引数のパース
「System.CommandLine」というライブラリ (必要に応じて NuGet ライブラリを使用) を利用すること。

2. プログラムの戻り値
(1) 何らかのエラーが発生した場合で、そのエラーをキャッチするなどした結果 Main 関数をプログラム的には自主的に return するようなエラー戻りコードを手動設定できる場合は、「1」を返すこと。(例外を catch せずにそのままプログラムがクラッシュすることに任せる場合は、それに任せてもよい。)
(2) エラーが発生しなかった場合は、「0」を返すこと。

3. メッセージ
(1) そのプログラムの実行中の流れにおける正常な流れにおいて表示される案内メッセージ (特にエラーが発生しなくても、表示されるメッセージ) は、標準出力に出力すること。
(2) エラーメッセージ (異常ケースでのみ表示される) は、標準エラー出力に出力すること。なお、プログラムのメインスレッドで普通に例外が発生する場合は、このクラッシュ前の出力処理は、ランタイムによって自動的に標準出力に出力されると考えられるので、その方法によることでもよい。
(3) (1), (2) の峻別の意図は、次を実現することにある。コマンドラインプログラムは、Linux の 「Supervisor」等のプログラムによってバックグラウンド動作させる場合がある。この際、標準エラー出力に書かれたエラーメッセージは、システム管理者に対して、「Supervisor」等のプログラムによってログとしてアラート送付されるべきである。標準出力に書かれた普通のメッセージは、「Supervisor」等のプログラムによってログとしてアラート送付されないべきである。



